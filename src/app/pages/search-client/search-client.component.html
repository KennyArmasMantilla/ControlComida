<div class="-mt-18 min-h-screen bg-gray-100 flex items-center justify-center p-6">
    <div class="bg-white shadow-lg rounded-xl w-full max-w-6xl p-6 space-y-8">

        <!-- Sección Superior -->
        <form [formGroup]="myform" class="grid grid-cols-1 md:grid-cols-3 gap-6" (ngSubmit)="onSave()">

            <!-- Nombre -->
            <div>
                <label for="nombre" class="block text-sm font-medium text-gray-700">Nombre</label>
                <input id="nombre" type="text" formControlName="name"
                    class="mt-1 w-full px-4 py-2 border rounded-lg focus:ring focus:ring-blue-300 focus:outline-none" />
            </div>

            <!-- Apellido -->
            <div>
                <label for="apellido" class="block text-sm font-medium text-gray-700">Apellido</label>
                <input id="apellido" type="text" formControlName="lastname"
                    class="mt-1 w-full px-4 py-2 border rounded-lg focus:ring focus:ring-blue-300 focus:outline-none" />
            </div>

            <!-- Cantidad Total + checkbox -->
            <div>
                <div class="flex items-center justify-between">
                    <label for="habilitar-total" class="block text-sm font-medium text-gray-700">Cantidad Total</label>
                    <input id="habilitar-total" type="checkbox" class="ml-2" [checked]="enableFinalNumber"
                        (change)="onToggleFinalNumber()" />
                </div>
                <input id="num-final" type="text" placeholder="0" formControlName="quantity"
                    class="w-full px-4 py-2 border rounded-lg focus:ring focus:ring-blue-300 focus:outline-none"
                    [ngClass]="{'bg-gray-100 cursor-not-allowed': !enableFinalNumber}"
                    [disabled]="!enableFinalNumber" />
            </div>

            <!-- Cantidad a Pagar -->
            <div>
                <label for="cantidad-pagar" class="block text-sm font-medium text-gray-700">Cantidad a Pagar</label>
                <input id="cantidad-pagar" type="text" formControlName="cantidadPagar"
                    class="mt-1 w-full px-4 py-2 border rounded-lg focus:ring focus:ring-blue-300 focus:outline-none" />
            </div>

            <!-- Cantidad a Recoger -->
            <div>
                <label for="cantidad-recoger" class="block text-sm font-medium text-gray-700">Cantidad a Recoger</label>
                <input id="cantidad-recoger" type="text" formControlName="cantidadRecoger"
                    class="mt-1 w-full px-4 py-2 border rounded-lg focus:ring focus:ring-blue-300 focus:outline-none" />
            </div>

            <!-- Botones -->
            <div class="flex items-end justify-end gap-4 md:col-span-1">
                <button class="px-5 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400">Cancelar</button>
                <button type="submit" class="px-5 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Guardar</button>
            </div>

        </form>

        <!-- Sección Inferior -->
        <div class="overflow-x-auto rounded-lg border  shadow-sm">
            <table class="min-w-full divide-y divide-stone-400">
                <thead>
                    <tr>
                        <th class="py-3">Nombre</th>
                        <th class="py-3">Apellido</th>
                        <th class="py-3">Cantidad</th>
                        <th class="py-3">Recojo</th>
                        <th class="py-3">Falta</th>
                        <th class="py-3">Cancelado</th>
                        <th class="py-3">Debe</th>
                        <th class="py-3">Total</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-gray-400">
                    @for(client of customer()?.history; track client){
                    <tr class="text-center">
                        <td class="px-2 py-1 text-base ">{{customer()?.name}}</td>
                        <td class="px-2 py-1 text-base">{{customer()?.lastname}}</td>
                        <td class="px-2 py-1 text-base">{{client.quantity}}</td>
                        <td class="px-2 py-1 text-base text-green-600 font-semibold">{{client.collectedChicken}}</td>
                        <td class="px-2 py-1 text-base text-red-500 font-semibold">{{client.remainingChicken}}</td>
                        <td class="px-2 py-1 text-base text-gray-500">{{client.paidChicken}}</td>
                        <td class="px-2 py-1 text-base text-red-700">{{client.owedChicken}}</td>
                        <td class="px-2 py-1 text-base font-bold text-gray-950">{{client.quantity * 15}}</td>
                    </tr>
                    }

                </tbody>


            </table>

        </div>

    </div>
</div>